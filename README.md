# Figwork

**AI-native workforce operations platform.** Businesses describe what they need — the AI agent plans the project, creates work units, drafts contracts, prices deliverables, screens candidates via voice interviews, manages escrow, and monitors execution. Students browse, apply, and get paid on completion.

---

## How It Works

```
Business describes a project in plain English
  ↓
AI Agent breaks it into deliverable-based work units
  ↓
Generates contracts, onboarding pages, pricing (via web search)
  ↓
Funds escrow → publishes to marketplace
  ↓
Students apply → AI voice interview screens them
  ↓
Auto-assign or manual review
  ↓
Student works → proof-of-work checks → submits
  ↓
Company reviews → approved → payout via Stripe
```

No forms. No back-and-forth. One conversation creates the entire operation.

---

## Architecture

| Layer | Stack |
|-------|-------|
| **Frontend** | Next.js 14 · React 18 · Tailwind CSS |
| **Backend** | Fastify · Node.js · Socket.io |
| **Database** | PostgreSQL + pgvector |
| **Cache/Queue** | Redis · BullMQ |
| **AI** | GPT-5.2 (agent, planning, interviews, QA) · OpenAI Realtime STT · ElevenLabs TTS |
| **Auth** | Clerk |
| **Payments** | Stripe (Payments, Connect, Identity) |
| **Storage** | Cloudinary |
| **Monorepo** | Turborepo + pnpm workspaces |

**51K+ lines of TypeScript** across 84 API routes and 68 AI agent tools.

---

## The AI Agent

The core differentiator. A GPT-5.2-powered operations agent with 68 callable tools that can:

- **Plan projects** — multi-stage chain: analyze brief → decompose into deliverables → price via web search → draft individual contracts + onboarding per work unit → batch execute
- **Manage work units** — create, update, publish, pause, delete with escrow sync
- **Draft contracts** — full legal agreements scoped per work unit, activate/archive
- **Build onboarding** — visual block editor (hero, text, checklist, CTA, images, files)
- **Screen candidates** — create interview templates, generate links, review transcripts
- **Monitor execution** — list applicants, approve/reject, track progress
- **Handle finances** — fund escrow, check balances, process payouts
- **Search the web** — real-time market rate research for pricing

The agent streams responses via SSE with chain-of-thought visibility. It runs autonomously through multi-step plans but stops after completing the user's request — no auto-chaining.

---

## Business Dashboard

Single-page chat interface with a dynamic right-side panel:

| Tab | What it does |
|-----|-------------|
| **Overview** | Progress bar, editable fields (price, deadline, deliverables, revisions, tier, assignment mode), spec viewer with markdown rendering, publish/pause/delete |
| **Execution** | Interview selector, link generator with copy button, applicant list with assign/reject/cancel actions, status badges |
| **Financial** | Escrow status card, fee breakdown, contractor payout, fund & publish |
| **Legal** | Contract list, expand/edit inline, activate/archive/delete, full text editor |
| **Onboard** | Visual block editor (hero, text, checklist, CTA, image, video, file, divider), drag-and-drop ordering |

Features:
- Real-time panel updates when the AI agent edits work units (intercepts SSE tool events)
- Floating context-aware suggestion chips generated by AI
- Image paste → GPT vision analysis
- Mobile-responsive (full-screen overlay on small screens)
- Markdown rendering (bold, bullets, clickable hyperlinks)

---

## Student Experience

| Page | Purpose |
|------|---------|
| **Available Tasks** | Marketplace with search, filtering, eligibility checks |
| **Task Detail** | Color-coded spec sections (safety=red, privacy=amber, deliverables=green), skills match indicators, accept/apply button |
| **Onboarding** | Visual blocks from business, contracts to sign, checklist, instructions |
| **Execution** | Clock in/out, submit deliverables, revision tracking |
| **Earnings** | Payout history, pending amounts |
| **POW** | Proof-of-work photo submissions with AI verification |

Students progress through trust tiers:

| Tier | EXP | Max Complexity | Platform Fee |
|------|-----|---------------|-------------|
| Novice | 0–499 | 2/5 | 20% |
| Pro | 500–1,999 | 4/5 | 15% |
| Elite | 2,000+ | 5/5 | 10% |

---

## AI Voice Interviews

Adaptive, multi-turn voice conversations for candidate screening:

1. Company creates template with questions + rubrics
2. AI conducts real-time interview (OpenAI Realtime STT + ElevenLabs TTS)
3. Follow-ups generated dynamically based on response sufficiency
4. Post-interview summary with strengths, gaps, and key quotes
5. Auto-score: <40% = reject, ≥40% = pass to assignment

---

## Project Structure

```
figwork/
├── apps/
│   ├── web/                     # Next.js frontend
│   │   └── src/app/
│   │       ├── (dashboard)/     # Business dashboard + AI chat
│   │       ├── (student)/       # Student portal
│   │       ├── (admin)/         # Admin panel
│   │       ├── interview/       # Voice interview UI
│   │       └── marketplace/     # Public task board
│   │
│   └── api/                     # Fastify backend
│       └── src/
│           ├── routes/          # 84 API endpoints
│           ├── lib/
│           │   └── agent-tools.ts  # 68 AI agent tools + multi-agent planner
│           ├── orchestrator/    # Interview session orchestration
│           ├── workers/         # BullMQ background jobs
│           └── websocket/       # Real-time events
│
├── packages/
│   ├── db/                      # Prisma schema + client
│   ├── ai/                      # OpenAI client, embeddings, prompts
│   └── shared/                  # Types, constants, tier config
│
└── docker/                      # Production Dockerfile
```

---

## Quick Start

```bash
# Prerequisites: Node 20+, pnpm 9+, PostgreSQL, Redis

git clone https://github.com/exexexll/Figwork.git
cd Figwork
pnpm install

# Environment
cp apps/api/env.example.txt apps/api/.env
cp apps/web/env.example.txt apps/web/.env.local
# Fill in: DATABASE_URL, REDIS_URL, CLERK keys, OPENAI_API_KEY, CLOUDINARY

# Database
pnpm db:generate
pnpm db:push

# Run
pnpm dev
# → Frontend: http://localhost:3000
# → API: http://localhost:3001
```

### Required Environment Variables

| Variable | Purpose |
|----------|---------|
| `DATABASE_URL` | PostgreSQL connection |
| `REDIS_URL` | Redis connection |
| `CLERK_SECRET_KEY` + `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` | Authentication |
| `OPENAI_API_KEY` | GPT-5.2 for agent, interviews, QA |
| `CLOUDINARY_CLOUD_NAME` / `_API_KEY` / `_API_SECRET` | File storage |
| `NEXT_PUBLIC_API_URL` | Backend URL (default `http://localhost:3001`) |

Optional: Stripe (payments), ElevenLabs (TTS), Twilio (SMS), Resend (email) — all gracefully degrade to mock mode.

---

## Deployment

| Service | Platform | Config |
|---------|----------|--------|
| Frontend | Vercel | `vercel.json` |
| Backend | Railway | `railway.toml` + `docker/api.Dockerfile` |
| Database | Any PostgreSQL (Supabase, Neon, Railway) | |
| Redis | Upstash / Railway Redis | |

---

## Background Workers

| Worker | What it does |
|--------|-------------|
| `post-process` | AI interview summaries |
| `pow` | Proof-of-work photo analysis |
| `qa` | Automated quality checks |
| `payout` | Stripe Connect payouts |
| `notification` | Email/SMS dispatch |
| `defect-analysis` | Recurring defect patterns |
| `knowledge` | RAG vector ingestion |
| `cleanup` | Stale session expiry |

---

## License

Proprietary — All rights reserved.
